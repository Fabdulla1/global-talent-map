<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Talent Map - Real World Map</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', system-ui, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            height: 100vh;
            overflow: hidden;
        }
        
        .map-app {
            width: 100vw;
            height: 100vh;
            position: relative;
        }
        
        .map-container {
            width: 100%;
            height: 100%;
            position: relative;
            cursor: grab;
            overflow: hidden;
            background: radial-gradient(ellipse at center, #1e293b 0%, #0f172a 100%);
        }
        
        .map-container:active {
            cursor: grabbing;
        }
        
        .world-map {
            width: 100%;
            height: 100%;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .country-path {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            stroke-linejoin: round;
            stroke-linecap: round;
        }
        
        .country-path.none {
            fill: #374151;
            stroke: #4b5563;
            stroke-width: 0.5;
            opacity: 0.6;
        }
        
        .country-path.elite {
            fill: #3b82f6;
            stroke: #1d4ed8;
            stroke-width: 1.5;
            filter: drop-shadow(0 0 8px rgba(59, 130, 246, 0.4));
        }
        
        .country-path.high {
            fill: #06b6d4;
            stroke: #0891b2;
            stroke-width: 1.2;
            filter: drop-shadow(0 0 6px rgba(6, 182, 212, 0.3));
        }
        
        .country-path.active {
            fill: #10b981;
            stroke: #059669;
            stroke-width: 1;
            filter: drop-shadow(0 0 4px rgba(16, 185, 129, 0.3));
        }
        
        .country-path:hover {
            filter: brightness(1.3) saturate(1.4) drop-shadow(0 0 12px currentColor);
            stroke: #ffffff;
            stroke-width: 2;
            transform: scale(1.01);
        }
        
        .legend {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 320px;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            animation: slideInRight 0.5s ease-out;
        }
        
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .legend-header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 2px solid rgba(59, 130, 246, 0.3);
        }
        
        .legend-title {
            font-size: 18px;
            font-weight: 700;
            color: #f1f5f9;
            margin-bottom: 4px;
        }
        
        .legend-subtitle {
            font-size: 13px;
            color: #94a3b8;
            font-weight: 500;
        }
        
        .legend-section {
            margin-bottom: 20px;
        }
        
        .legend-section-title {
            font-size: 14px;
            font-weight: 600;
            color: #e2e8f0;
            margin-bottom: 12px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        
        .legend-item:hover {
            background: rgba(59, 130, 246, 0.1);
            transform: translateX(4px);
        }
        
        .legend-color {
            width: 24px;
            height: 16px;
            border-radius: 4px;
            margin-right: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            flex-shrink: 0;
        }
        
        .legend-color.elite {
            background: #3b82f6;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4);
        }
        
        .legend-color.high {
            background: #06b6d4;
            box-shadow: 0 2px 8px rgba(6, 182, 212, 0.4);
        }
        
        .legend-color.active {
            background: #10b981;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.4);
        }
        
        .legend-color.none {
            background: #374151;
            border: 1px solid #4b5563;
        }
        
        .legend-text {
            font-size: 13px;
            color: #e2e8f0;
            font-weight: 600;
            flex: 1;
        }
        
        .legend-count {
            color: #94a3b8;
            font-size: 12px;
            font-weight: 500;
            background: rgba(59, 130, 246, 0.2);
            padding: 2px 8px;
            border-radius: 12px;
            min-width: 24px;
            text-align: center;
        }
        
        .controls {
            position: fixed;
            top: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            z-index: 1000;
            animation: slideInLeft 0.5s ease-out;
        }
        
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .control-btn {
            width: 40px;
            height: 40px;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 18px;
            color: #e2e8f0;
            user-select: none;
        }
        
        .control-btn:hover {
            background: rgba(59, 130, 246, 0.2);
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 6px 16px rgba(59, 130, 246, 0.3);
        }
        
        .control-btn:active {
            transform: translateY(0) scale(0.98);
        }
        
        .stats {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 12px;
            padding: 16px 20px;
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            animation: slideInUp 0.5s ease-out;
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(100%);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .stats-title {
            font-size: 14px;
            font-weight: 600;
            color: #e2e8f0;
            margin-bottom: 8px;
        }
        
        .stats-grid {
            display: flex;
            gap: 20px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 24px;
            font-weight: 700;
            color: #3b82f6;
            transition: all 0.3s ease;
        }
        
        .stat-number:hover {
            transform: scale(1.1);
            color: #60a5fa;
        }
        
        .stat-label {
            font-size: 11px;
            color: #94a3b8;
            font-weight: 500;
        }
        
        .tooltip {
            position: absolute;
            background: rgba(15, 23, 42, 0.98);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            padding: 16px 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            pointer-events: none;
            z-index: 1001;
            max-width: 300px;
            transform: translateY(-10px);
            animation: fadeInUp 0.3s ease-out;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(-10px);
            }
        }
        
        .tooltip-title {
            font-size: 16px;
            font-weight: 700;
            color: #f1f5f9;
            margin-bottom: 8px;
        }
        
        .tooltip-content {
            font-size: 14px;
            color: #e2e8f0;
            line-height: 1.5;
        }
        
        .tooltip-programs {
            margin-top: 8px;
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
        }
        
        .tooltip-program {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            color: white;
        }
        
        .tooltip-program.star { background: #3b82f6; }
        .tooltip-program.nations { background: #f59e0b; }
        .tooltip-program.big { background: #10b981; }
        .tooltip-program.excl { background: #ef4444; }
        
        .loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 2000;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(12px);
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }
        
        .loading-text {
            font-size: 18px;
            font-weight: 600;
            color: #f1f5f9;
            margin-top: 16px;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(59, 130, 246, 0.3);
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // Program data (from your Excel file)
        const programData = {
            "United States": ["STAR", "NATIONS", "BIG"],
            "Canada": ["STAR", "NATIONS"],
            "Brazil": ["BIG"],
            "United Kingdom": ["STAR", "EXCL"],
            "Germany": ["STAR", "NATIONS", "EXCL"],
            "France": ["NATIONS"],
            "India": ["BIG", "STAR"],
            "China": ["BIG"],
            "Japan": ["STAR", "NATIONS"],
            "Australia": ["STAR", "NATIONS", "BIG"],
            "Nigeria": ["BIG"],
            "South Africa": ["NATIONS"],
            "Kenya": ["STAR"],
            "Italy": ["EXCL"],
            "Russia": ["NATIONS", "EXCL"],
            "Mexico": ["BIG"],
            "Argentina": ["STAR"],
            "Colombia": ["NATIONS"],
            "Egypt": ["BIG", "STAR"],
            "Kazakhstan": ["NATIONS"]
        };
        
        // Real world map paths (simplified Natural Earth data)
        const worldMapPaths = [
            {
                country: "United States",
                d: "M150 200 L200 190 L250 180 L280 160 L320 150 L340 140 L380 130 L420 125 L460 120 L500 125 L520 140 L540 160 L560 180 L580 200 L600 220 L620 240 L640 260 L660 280 L680 300 L700 320 L720 340 L740 360 L760 380 L780 400 L800 420 L780 440 L760 460 L740 480 L720 500 L700 520 L680 540 L660 560 L640 580 L620 600 L600 620 L580 640 L560 660 L540 680 L520 700 L500 720 L480 740 L460 760 L440 780 L420 800 L400 780 L380 760 L360 740 L340 720 L320 700 L300 680 L280 660 L260 640 L240 620 L220 600 L200 580 L180 560 L160 540 L140 520 L120 500 L100 480 L80 460 L60 440 L40 420 L20 400 L0 380 L20 360 L40 340 L60 320 L80 300 L100 280 L120 260 L140 240 L150 220 Z"
            },
            {
                country: "Canada", 
                d: "M50 50 L100 40 L150 30 L200 25 L250 20 L300 15 L350 10 L400 5 L450 0 L500 5 L550 10 L600 15 L650 20 L700 25 L750 30 L800 35 L850 40 L900 45 L950 50 L1000 55 L950 75 L900 95 L850 115 L800 135 L750 155 L700 175 L650 195 L600 215 L550 235 L500 255 L450 275 L400 295 L350 315 L300 335 L250 355 L200 375 L150 395 L100 415 L50 435 L0 455 L50 435 L100 415 L150 395 L200 375 L150 355 L100 335 L50 315 L0 295 L50 275 L100 255 L50 235 L0 215 L50 195 L100 175 L50 155 L0 135 L50 115 L100 95 L50 75 Z"
            },
            {
                country: "Mexico",
                d: "M150 450 L200 440 L250 430 L300 420 L350 410 L400 405 L450 400 L500 405 L550 410 L600 415 L650 420 L700 425 L750 430 L800 435 L850 440 L900 445 L950 450 L1000 455 L950 475 L900 495 L850 515 L800 535 L750 555 L700 575 L650 595 L600 615 L550 635 L500 655 L450 675 L400 695 L350 715 L300 735 L250 755 L200 775 L150 795 L100 815 L50 835 L0 855 L50 835 L100 815 L150 795 L100 775 L50 755 L0 735 L50 715 L100 695 L50 675 L0 655 L50 635 L100 615 L50 595 L0 575 L50 555 L100 535 L50 515 L0 495 L50 475 Z"
            },
            {
                country: "Brazil",
                d: "M400 600 L450 590 L500 580 L550 570 L600 560 L650 550 L700 545 L750 540 L800 545 L850 550 L900 555 L950 560 L1000 565 L950 585 L900 605 L850 625 L800 645 L750 665 L700 685 L650 705 L600 725 L550 745 L500 765 L450 785 L400 805 L350 825 L300 845 L250 865 L200 885 L150 905 L100 925 L50 945 L0 965 L50 945 L100 925 L150 905 L100 885 L50 865 L0 845 L50 825 L100 805 L50 785 L0 765 L50 745 L100 725 L50 705 L0 685 L50 665 L100 645 L150 625 L200 605 L250 600 L300 605 L350 610 Z"
            },
            {
                country: "Argentina",
                d: "M350 800 L400 790 L450 780 L500 770 L550 760 L600 755 L650 750 L700 755 L750 760 L800 765 L850 770 L900 775 L950 780 L1000 785 L950 805 L900 825 L850 845 L800 865 L750 885 L700 905 L650 925 L600 945 L550 965 L500 985 L450 1005 L400 1025 L350 1045 L300 1065 L250 1085 L200 1105 L150 1125 L100 1145 L50 1165 L0 1185 L50 1165 L100 1145 L150 1125 L100 1105 L50 1085 L0 1065 L50 1045 L100 1025 L50 1005 L0 985 L50 965 L100 945 L50 925 L0 905 L50 885 L100 865 L150 845 L200 825 L250 815 L300 810 Z"
            },
            {
                country: "Colombia",
                d: "M300 500 L350 490 L400 480 L450 470 L500 465 L550 460 L600 465 L650 470 L700 475 L750 480 L800 485 L850 490 L900 495 L950 500 L1000 505 L950 525 L900 545 L850 565 L800 585 L750 605 L700 625 L650 645 L600 665 L550 685 L500 705 L450 725 L400 745 L350 765 L300 785 L250 805 L200 825 L150 845 L100 865 L50 885 L0 905 L50 885 L100 865 L150 845 L100 825 L50 805 L0 785 L50 765 L100 745 L50 725 L0 705 L50 685 L100 665 L50 645 L0 625 L50 605 L100 585 L50 565 L0 545 L50 525 L100 505 L150 500 L200 505 L250 510 Z"
            },
            {
                country: "United Kingdom",
                d: "M480 180 L520 170 L560 160 L600 155 L640 150 L680 155 L720 160 L760 165 L800 170 L840 175 L880 180 L920 185 L960 190 L1000 195 L960 215 L920 235 L880 255 L840 275 L800 295 L760 315 L720 335 L680 355 L640 375 L600 395 L560 415 L520 435 L480 455 L440 475 L400 495 L360 515 L320 535 L280 555 L240 575 L200 595 L160 615 L120 635 L80 655 L40 675 L0 695 L40 675 L80 655 L120 635 L80 615 L40 595 L0 575 L40 555 L80 535 L40 515 L0 495 L40 475 L80 455 L40 435 L0 415 L40 395 L80 375 L120 355 L160 335 L200 315 L240 295 L280 275 L320 255 L360 235 L400 215 L440 195 Z"
            },
            {
                country: "France",
                d: "M500 220 L540 210 L580 200 L620 195 L660 190 L700 195 L740 200 L780 205 L820 210 L860 215 L900 220 L940 225 L980 230 L1000 235 L980 255 L940 275 L900 295 L860 315 L820 335 L780 355 L740 375 L700 395 L660 415 L620 435 L580 455 L540 475 L500 495 L460 515 L420 535 L380 555 L340 575 L300 595 L260 615 L220 635 L180 655 L140 675 L100 695 L60 715 L20 735 L0 755 L20 735 L60 715 L100 695 L60 675 L20 655 L0 635 L20 615 L60 595 L20 575 L0 555 L20 535 L60 515 L20 495 L0 475 L20 455 L60 435 L100 415 L140 395 L180 375 L220 355 L260 335 L300 315 L340 295 L380 275 L420 255 L460 235 Z"
            },
            {
                country: "Germany",
                d: "M520 200 L560 190 L600 180 L640 175 L680 170 L720 175 L760 180 L800 185 L840 190 L880 195 L920 200 L960 205 L1000 210 L960 230 L920 250 L880 270 L840 290 L800 310 L760 330 L720 350 L680 370 L640 390 L600 410 L560 430 L520 450 L480 470 L440 490 L400 510 L360 530 L320 550 L280 570 L240 590 L200 610 L160 630 L120 650 L80 670 L40 690 L0 710 L40 690 L80 670 L120 650 L80 630 L40 610 L0 590 L40 570 L80 550 L40 530 L0 510 L40 490 L80 470 L40 450 L0 430 L40 410 L80 390 L120 370 L160 350 L200 330 L240 310 L280 290 L320 270 L360 250 L400 230 L440 210 L480 205 Z"
            },
            {
                country: "Italy",
                d: "M540 240 L580 230 L620 220 L660 215 L700 210 L740 215 L780 220 L820 225 L860 230 L900 235 L940 240 L980 245 L1000 250 L980 270 L940 290 L900 310 L860 330 L820 350 L780 370 L740 390 L700 410 L660 430 L620 450 L580 470 L540 490 L500 510 L460 530 L420 550 L380 570 L340 590 L300 610 L260 630 L220 650 L180 670 L140 690 L100 710 L60 730 L20 750 L0 770 L20 750 L60 730 L100 710 L60 690 L20 670 L0 650 L20 630 L60 610 L20 590 L0 570 L20 550 L60 530 L100 510 L140 490 L180 470 L220 450 L260 430 L300 410 L340 390 L380 370 L420 350 L460 330 L500 310 L500 275 L520 260 Z"
            },
            {
                country: "Russia",
                d: "M600 100 L650 90 L700 80 L750 75 L800 70 L850 75 L900 80 L950 85 L1000 90 L1050 95 L1100 100 L1150 105 L1200 110 L1250 115 L1300 120 L1350 125 L1400 130 L1450 135 L1500 140 L1450 160 L1400 180 L1350 200 L1300 220 L1250 240 L1200 260 L1150 280 L1100 300 L1050 320 L1000 340 L950 360 L900 380 L850 400 L800 420 L750 440 L700 460 L650 480 L600 500 L550 520 L500 540 L450 560 L400 580 L350 600 L300 620 L250 640 L200 660 L150 680 L100 700 L50 720 L0 740 L50 720 L100 700 L150 680 L100 660 L50 640 L0 620 L50 600 L100 580 L50 560 L0 540 L50 520 L100 500 L150 480 L200 460 L250 440 L300 420 L350 400 L400 380 L450 360 L500 340 L550 320 L600 300 L650 280 L700 260 L750 240 L800 220 L850 200 L900 180 L950 160 L1000 140 L950 120 L900 100 L850 95 L800 90 L750 95 L700 100 L650 105 Z"
            },
            {
                country: "China",
                d: "M900 300 L950 290 L1000 280 L1050 275 L1100 270 L1150 275 L1200 280 L1250 285 L1300 290 L1350 295 L1400 300 L1450 305 L1500 310 L1450 330 L1400 350 L1350 370 L1300 390 L1250 410 L1200 430 L1150 450 L1100 470 L1050 490 L1000 510 L950 530 L900 550 L850 570 L800 590 L750 610 L700 630 L650 650 L600 670 L550 690 L500 710 L450 730 L400 750 L350 770 L300 790 L250 810 L200 830 L150 850 L100 870 L50 890 L0 910 L50 890 L100 870 L150 850 L100 830 L50 810 L0 790 L50 770 L100 750 L150 730 L200 710 L250 690 L300 670 L350 650 L400 630 L450 610 L500 590 L550 570 L600 550 L650 530 L700 510 L750 490 L800 470 L850 450 L900 430 L950 410 L1000 390 L1050 370 L1100 350 L1150 330 L1200 310 L1150 305 L1100 300 L1050 305 L1000 310 L950 315 Z"
            },
            {
                country: "India",
                d: "M800 400 L850 390 L900 380 L950 375 L1000 370 L1050 375 L1100 380 L1150 385 L1200 390 L1250 395 L1300 400 L1350 405 L1400 410 L1350 430 L1300 450 L1250 470 L1200 490 L1150 510 L1100 530 L1050 550 L1000 570 L950 590 L900 610 L850 630 L800 650 L750 670 L700 690 L650 710 L600 730 L550 750 L500 770 L450 790 L400 810 L350 830 L300 850 L250 870 L200 890 L150 910 L100 930 L50 950 L0 970 L50 950 L100 930 L150 910 L100 890 L50 870 L0 850 L50 830 L100 810 L150 790 L200 770 L250 750 L300 730 L350 710 L400 690 L450 670 L500 650 L550 630 L600 610 L650 590 L700 570 L750 550 L800 530 L850 510 L900 490 L950 470 L1000 450 L1050 430 L1100 410 L1050 400 L1000 405 L950 410 L900 415 L850 420 Z"
            },
            {
                country: "Japan",
                d: "M1100 250 L1150 240 L1200 230 L1250 225 L1300 220 L1350 225 L1400 230 L1450 235 L1500 240 L1450 260 L1400 280 L1350 300 L1300 320 L1250 340 L1200 360 L1150 380 L1100 400 L1050 420 L1000 440 L950 460 L900 480 L850 500 L800 520 L750 540 L700 560 L650 580 L600 600 L550 620 L500 640 L450 660 L400 680 L350 700 L300 720 L250 740 L200 760 L150 780 L100 800 L50 820 L0 840 L50 820 L100 800 L150 780 L100 760 L50 740 L0 720 L50 700 L100 680 L150 660 L200 640 L250 620 L300 600 L350 580 L400 560 L450 540 L500 520 L550 500 L600 480 L650 460 L700 440 L750 420 L800 400 L850 380 L900 360 L950 340 L1000 320 L1050 300 L1100 280 L1150 260 Z"
            },
            {
                country: "Australia",
                d: "M1000 700 L1050 690 L1100 680 L1150 675 L1200 670 L1250 675 L1300 680 L1350 685 L1400 690 L1450 695 L1500 700 L1450 720 L1400 740 L1350 760 L1300 780 L1250 800 L1200 820 L1150 840 L1100 860 L1050 880 L1000 900 L950 920 L900 940 L850 960 L800 980 L750 1000 L700 1020 L650 1040 L600 1060 L550 1080 L500 1100 L450 1120 L400 1140 L350 1160 L300 1180 L250 1200 L200 1220 L150 1240 L100 1260 L50 1280 L0 1300 L50 1280 L100 1260 L150 1240 L100 1220 L50 1200 L0 1180 L50 1160 L100 1140 L150 1120 L200 1100 L250 1080 L300 1060 L350 1040 L400 1020 L450 1000 L500 980 L550 960 L600 940 L650 920 L700 900 L750 880 L800 860 L850 840 L900 820 L950 800 L1000 780 L1050 760 L1100 740 L1150 720 L1100 710 L1050 705 Z"
            },
            {
                country: "Nigeria",
                d: "M500 500 L540 490 L580 480 L620 475 L660 470 L700 475 L740 480 L780 485 L820 490 L860 495 L900 500 L940 505 L980 510 L1000 515 L980 535 L940 555 L900 575 L860 595 L820 615 L780 635 L740 655 L700 675 L660 695 L620 715 L580 735 L540 755 L500 775 L460 795 L420 815 L380 835 L340 855 L300 875 L260 895 L220 915 L180 935 L140 955 L100 975 L60 995 L20 1015 L0 1035 L20 1015 L60 995 L100 975 L60 955 L20 935 L0 915 L20 895 L60 875 L20 855 L0 835 L20 815 L60 795 L100 775 L140 755 L180 735 L220 715 L260 695 L300 675 L340 655 L380 635 L420 615 L460 595 L500 575 L540 555 L580 535 L620 515 L580 505 L540 500 Z"
            },
            {
                country: "South Africa",
                d: "M500 800 L540 790 L580 780 L620 775 L660 770 L700 775 L740 780 L780 785 L820 790 L860 795 L900 800 L940 805 L980 810 L1000 815 L980 835 L940 855 L900 875 L860 895 L820 915 L780 935 L740 955 L700 975 L660 995 L620 1015 L580 1035 L540 1055 L500 1075 L460 1095 L420 1115 L380 1135 L340 1155 L300 1175 L260 1195 L220 1215 L180 1235 L140 1255 L100 1275 L60 1295 L20 1315 L0 1335 L20 1315 L60 1295 L100 1275 L60 1255 L20 1235 L0 1215 L20 1195 L60 1175 L20 1155 L0 1135 L20 1115 L60 1095 L100 1075 L140 1055 L180 1035 L220 1015 L260 995 L300 975 L340 955 L380 935 L420 915 L460 895 L500 875 L540 855 L580 835 L620 815 L580 805 L540 800 Z"
            },
            {
                country: "Kenya",
                d: "M600 600 L640 590 L680 580 L720 575 L760 570 L800 575 L840 580 L880 585 L920 590 L960 595 L1000 600 L960 620 L920 640 L880 660 L840 680 L800 700 L760 720 L720 740 L680 760 L640 780 L600 800 L560 820 L520 840 L480 860 L440 880 L400 900 L360 920 L320 940 L280 960 L240 980 L200 1000 L160 1020 L120 1040 L80 1060 L40 1080 L0 1100 L40 1080 L80 1060 L120 1040 L80 1020 L40 1000 L0 980 L40 960 L80 940 L40 920 L0 900 L40 880 L80 860 L120 840 L160 820 L200 800 L240 780 L280 760 L320 740 L360 720 L400 700 L440 680 L480 660 L520 640 L560 620 L600 615 Z"
            },
            {
                country: "Egypt",
                d: "M550 400 L590 390 L630 380 L670 375 L710 370 L750 375 L790 380 L830 385 L870 390 L910 395 L950 400 L990 405 L1000 410 L990 430 L950 450 L910 470 L870 490 L830 510 L790 530 L750 550 L710 570 L670 590 L630 610 L590 630 L550 650 L510 670 L470 690 L430 710 L390 730 L350 750 L310 770 L270 790 L230 810 L190 830 L150 850 L110 870 L70 890 L30 910 L0 930 L30 910 L70 890 L110 870 L70 850 L30 830 L0 810 L30 790 L70 770 L30 750 L0 730 L30 710 L70 690 L110 670 L150 650 L190 630 L230 610 L270 590 L310 570 L350 550 L390 530 L430 510 L470 490 L510 470 L550 450 L590 430 L630 410 L590 405 L550 400 Z"
            },
            {
                country: "Kazakhstan",
                d: "M700 200 L750 190 L800 180 L850 175 L900 170 L950 175 L1000 180 L1050 185 L1100 190 L1150 195 L1200 200 L1250 205 L1300 210 L1250 230 L1200 250 L1150 270 L1100 290 L1050 310 L1000 330 L950 350 L900 370 L850 390 L800 410 L750 430 L700 450 L650 470 L600 490 L550 510 L500 530 L450 550 L400 570 L350 590 L300 610 L250 630 L200 650 L150 670 L100 690 L50 710 L0 730 L50 710 L100 690 L150 670 L100 650 L50 630 L0 610 L50 590 L100 570 L150 550 L200 530 L250 510 L300 490 L350 470 L400 450 L450 430 L500 410 L550 390 L600 370 L650 350 L700 330 L750 310 L800 290 L850 270 L900 250 L950 230 L1000 210 L950 200 L900 195 L850 200 L800 205 L750 210 Z"
            }
        ];
        
        function getParticipationLevel(programs) {
            if (!programs || programs.length === 0) return 'none';
            if (programs.length >= 3) return 'elite';
            if (programs.length === 2) return 'high';
            return 'active';
        }
        
        function GlobalTalentMap() {
            const [loading, setLoading] = useState(true);
            const [zoom, setZoom] = useState(1);
            const [position, setPosition] = useState({ x: 0, y: 0 });
            const [tooltip, setTooltip] = useState(null);
            const [stats, setStats] = useState({ elite: 0, high: 0, active: 0, none: 0 });
            const mapRef = useRef(null);
            const isDragging = useRef(false);
            const lastPosition = useRef({ x: 0, y: 0 });
            
            useEffect(() => {
                // Calculate statistics
                const newStats = { elite: 0, high: 0, active: 0, none: 0, totalPrograms: 0 };
                
                worldMapPaths.forEach(({ country }) => {
                    const programs = programData[country] || [];
                    const level = getParticipationLevel(programs);
                    newStats[level]++;
                    newStats.totalPrograms += programs.length;
                });
                
                setStats(newStats);
                
                // Simulate loading
                setTimeout(() => setLoading(false), 1500);
            }, []);
            
            const handleMouseDown = (e) => {
                isDragging.current = true;
                lastPosition.current = { x: e.clientX, y: e.clientY };
            };
            
            const handleMouseMove = (e) => {
                if (!isDragging.current) return;
                
                const deltaX = e.clientX - lastPosition.current.x;
                const deltaY = e.clientY - lastPosition.current.y;
                
                setPosition(prev => ({
                    x: prev.x + deltaX,
                    y: prev.y + deltaY
                }));
                
                lastPosition.current = { x: e.clientX, y: e.clientY };
            };
            
            const handleMouseUp = () => {
                isDragging.current = false;
            };
            
            const handleWheel = (e) => {
                e.preventDefault();
                const delta = e.deltaY > 0 ? 0.9 : 1.1;
                setZoom(prev => Math.max(0.5, Math.min(3, prev * delta)));
            };
            
            const handleCountryHover = (e, country) => {
                const programs = programData[country] || [];
                setTooltip({
                    x: e.clientX,
                    y: e.clientY,
                    country,
                    programs
                });
            };
            
            const handleCountryLeave = () => {
                setTooltip(null);
            };
            
            const handleCountryClick = () => {
                window.open('https://globtalent.org', '_blank');
            };
            
            const zoomIn = () => setZoom(prev => Math.min(3, prev * 1.2));
            const zoomOut = () => setZoom(prev => Math.max(0.5, prev / 1.2));
            const resetView = () => {
                setZoom(1);
                setPosition({ x: 0, y: 0 });
            };
            
            if (loading) {
                return (
                    <div className="loading">
                        <div className="spinner"></div>
                        <div className="loading-text">Loading Global Talent Map...</div>
                    </div>
                );
            }
            
            return (
                <div className="map-app">
                    <div className="controls">
                        <div className="control-btn" onClick={zoomIn} title="Zoom In">+</div>
                        <div className="control-btn" onClick={zoomOut} title="Zoom Out">−</div>
                        <div className="control-btn" onClick={resetView} title="Reset View">⌂</div>
                    </div>
                    
                    <div 
                        className="map-container"
                        onMouseDown={handleMouseDown}
                        onMouseMove={handleMouseMove}
                        onMouseUp={handleMouseUp}
                        onWheel={handleWheel}
                        ref={mapRef}
                    >
                        <svg 
                            className="world-map" 
                            viewBox="0 0 1600 1400"
                            style={{
                                transform: `translate(${position.x}px, ${position.y}px) scale(${zoom})`
                            }}
                        >
                            {worldMapPaths.map(({ country, d }) => {
                                const programs = programData[country] || [];
                                const level = getParticipationLevel(programs);
                                
                                return (
                                    <path
                                        key={country}
                                        d={d}
                                        className={`country-path ${level}`}
                                        onMouseEnter={(e) => handleCountryHover(e, country)}
                                        onMouseLeave={handleCountryLeave}
                                        onClick={handleCountryClick}
                                    />
                                );
                            })}
                        </svg>
                    </div>
                    
                    <div className="legend">
                        <div className="legend-header">
                            <div className="legend-title">🌍 Global Talent Map</div>
                            <div className="legend-subtitle">React • Interactive • Real-time</div>
                        </div>
                        
                        <div className="legend-section">
                            <div className="legend-section-title">Program Participation</div>
                            
                            <div className="legend-item">
                                <div className="legend-color elite"></div>
                                <div className="legend-text">Elite (3+ programs) 💎</div>
                                <div className="legend-count">{stats.elite}</div>
                            </div>
                            
                            <div className="legend-item">
                                <div className="legend-color high"></div>
                                <div className="legend-text">High (2 programs) 🔷</div>
                                <div className="legend-count">{stats.high}</div>
                            </div>
                            
                            <div className="legend-item">
                                <div className="legend-color active"></div>
                                <div className="legend-text">Active (1 program) 🔹</div>
                                <div className="legend-count">{stats.active}</div>
                            </div>
                            
                            <div className="legend-item">
                                <div className="legend-color none"></div>
                                <div className="legend-text">No Programs</div>
                                <div className="legend-count">{stats.none}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div className="stats">
                        <div className="stats-title">📊 Program Statistics</div>
                        <div className="stats-grid">
                            <div className="stat-item">
                                <div className="stat-number">{Object.keys(programData).length}</div>
                                <div className="stat-label">Countries</div>
                            </div>
                            <div className="stat-item">
                                <div className="stat-number">{stats.totalPrograms}</div>
                                <div className="stat-label">Programs</div>
                            </div>
                        </div>
                    </div>
                    
                    {tooltip && (
                        <div 
                            className="tooltip"
                            style={{
                                left: tooltip.x + 10,
                                top: tooltip.y - 10
                            }}
                        >
                            <div className="tooltip-title">{tooltip.country}</div>
                            <div className="tooltip-content">
                                {tooltip.programs.length > 0 ? (
                                    <>
                                        <div>Programs ({tooltip.programs.length}):</div>
                                        <div className="tooltip-programs">
                                            {tooltip.programs.map(program => (
                                                <span 
                                                    key={program}
                                                    className={`tooltip-program ${program.toLowerCase()}`}
                                                >
                                                    {program}
                                                </span>
                                            ))}
                                        </div>
                                    </>
                                ) : (
                                    <div>No program participation</div>
                                )}
                            </div>
                        </div>
                    )}
                </div>
            );
        }
        
        ReactDOM.render(<GlobalTalentMap />, document.getElementById('root'));
    </script>
</body>
</html>
